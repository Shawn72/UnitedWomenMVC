(function(d){function l(){var a=h.clientHeight,b=d.innerHeight;return a<b?b:a}function f(a,b){var g=a.offsetHeight,c=d.pageYOffset||h.scrollTop,f=c+l(),e=a,k=0;do isNaN(e.offsetTop)||(k+=e.offsetTop),isNaN(e.offsetLeft);while(e=e.offsetParent);e=k;b=b||0;return e+g*b<=f&&e+g-g*b>=c}function m(a,b){this.el=a;var d=this.defaults,c;for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);this.options=d;this._init()}var h=d.document.documentElement;m.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},
_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll("#"+this.el.id+" > li"));this.itemsCount=this.items.length;this.itemsRenderedCount=0;this.didScroll=!1;var a=this;imagesLoaded(this.el,function(){new Masonry(a.el,{itemSelector:".project-item",transitionDuration:0});Modernizr.cssanimations&&(a.items.forEach(function(b,d){f(b)&&(a._checkTotalRendered(),classie.add(b,"shown"))}),d.addEventListener("scroll",function(){a._onScrollFn()},!1),d.addEventListener("resize",function(){a._resizeHandler()},
!1))})},_onScrollFn:function(){var a=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){a._scrollPage()},60))},_scrollPage:function(){var a=this;this.items.forEach(function(b,g){classie.has(b,"shown")||classie.has(b,"animate")||!f(b,a.options.viewportFactor)||setTimeout(function(){var c=(d.pageYOffset||h.scrollTop)+l()/2;a.el.style.WebkitPerspectiveOrigin="50% "+c+"px";a.el.style.MozPerspectiveOrigin="50% "+c+"px";a.el.style.perspectiveOrigin="50% "+c+"px";a._checkTotalRendered();a.options.minDuration&&
a.options.maxDuration&&(c=Math.random()*(a.options.maxDuration-a.options.minDuration)+a.options.minDuration+"s",b.style.WebkitAnimationDuration=c,b.style.MozAnimationDuration=c,b.style.animationDuration=c);classie.add(b,"animate")},25)});this.didScroll=!1},_resizeHandler:function(){var a=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){a._scrollPage();a.resizeTimeout=null},1E3)},_checkTotalRendered:function(){++this.itemsRenderedCount;this.itemsRenderedCount===
this.itemsCount&&d.removeEventListener("scroll",this._onScrollFn)}};d.AnimOnScroll=m})(window);